asset.require('./base')

asset.request('scene/solarsystem/planets/earth/satellites/navigation/gps')
asset.request('scene/solarsystem/planets/earth/satellites/misc/spacestations')

asset.onInitialize(function ()
    local now = openspace.time.currentWallTime()
    -- Jump back one day to be able to show complete weather data on Earth.
    openspace.time.setTime(openspace.time.advancedTime(now, "-1d"))

    openspace.addVirtualProperty(
        "BoolProperty",
        "Show Trails",
        "Scene.*Trail.Renderable.Enabled",
        "Disable or enable all trails of the scene at the same time",
        true,
        nil,
        nil
    )

    openspace.globebrowsing.goToGeo("Earth", 58.5877, 16.1924, 20000000)

    openspace.markInterestingNodes({ "Earth", "Sun" })
end)

asset.onDeinitialize(function ()
    openspace.removeInterestingNodes({ "Earth", "Sun" })
    openspace.removeVirtualProperty("*Trail.Renderable.Enabled")
end)
