local transforms = asset.require("scene/solarsystem/sun/transforms")

local band = {
    Identifier = "GalacticBand",
    Parent = transforms.SolarSystemBarycenter.Name,
    Transform = {
        Scale = {
          Type = "StaticScale",
          Scale = 9.46377307652E18;
        }
    },
    Renderable = {
        Type = "RenderableRadialGrid",
        Opacity = 0.8,
        Color = { 1.0, 1.0, 1.0 },
        LineWidth = 3.0,
        GridSegments = { 1, 1 },
        Radii = { 0.5, 0.5 },
        Enabled = asset.enabled
    },
    GUI = {
        Name = "Galactic Equator Line",
        Path = "/Other/Lines"
    }
}

local uri = "Scene." .. band.Identifier .. ".Renderable"

local showAction = {
  Identifier = "os.nightsky.show_galactic_band",
  Name = "Show galactic equator line",
  Command = "openspace.fadeIn('" .. uri .. "')",
  Documentation = "Shows the galactic equator line",
  GuiPath = "/Night Sky/Lines and Grids/Show and Hide",
  IsLocal = false
}
  
local hideAction = {
  Identifier = "os.nightsky.hide_galactic_band",
  Name = "Hide galactic equator line",
  Command = "openspace.fadeOut('" .. uri .. "')",
  Documentation = "Hides the galactic equator line",
  GuiPath = "/Night Sky/Lines and Grids/Show and Hide",
  IsLocal = false
}

local toggleAction = {
  Identifier = "os.nightsky.toggle_galactic_band",
  Name = "Toggle galactic equator line",
  Command = "openspace.toggleFade('" .. uri .. "')",
  Documentation = "Toggles the galactic equator line visibilty",
  GuiPath = "/Night Sky/Lines and Grids",
  IsLocal = false
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(band)
  openspace.action.registerAction(toggleAction)
  openspace.action.registerAction(showAction)
  openspace.action.registerAction(hideAction)
end)
  
asset.onDeinitialize(function()
  openspace.action.removeAction(hideAction)
  openspace.action.removeAction(showAction)
  openspace.action.registerAction(toggleAction)
  openspace.removeSceneGraphNode(band)
end)
  
asset.export(band)
asset.export(toggleAction)
asset.export(showAction)
asset.export(hideAction)
