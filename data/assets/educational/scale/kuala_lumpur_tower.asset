local helper = asset.require('util/scale_model_helper')

local name = "Kuala Lumpur Tower"
local identifier = "ScaleKualaLumpurTower"
local lat = 3.152878
local lon = 101.703533
local altitude = 0
local scale = 1
local rotationVector = { 0.0, 98.68, 0.0 }

local modelFolder = helper.createModelFolder(name, "scale_model_kuala_lumpur_tower")
local model = helper.createModel(identifier, lat, lon, altitude, scale, "Meter", 
  rotationVector, name, modelFolder, "menara_kl_FBX.osmodel")

local updatePositionAction = helper.createDropAction(identifier, name, 'Scale Objects')
local resetPositionAction = helper.createResetAction(identifier, name, lat, lon, 'Scale Objects')

asset.onInitialize(function()
  openspace.addSceneGraphNode(model)
  openspace.action.registerAction(updatePositionAction)
  openspace.action.registerAction(resetPositionAction)
end)

asset.onDeinitialize(function()
  openspace.action.removeAction(resetPositionAction)
  openspace.action.removeAction(updatePositionAction)
  openspace.removeSceneGraphNode(model)
end)

asset.export(model)
asset.export(updatePositionAction)
asset.export(resetPositionAction)
