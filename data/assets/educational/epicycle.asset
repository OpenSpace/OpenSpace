asset.require("scene/solarsystem/planets/mercury/trail_earth")
asset.require("scene/solarsystem/planets/venus/trail_earth")
asset.require("scene/solarsystem/planets/mars/trail_earth")
asset.require("scene/solarsystem/planets/jupiter/trail_earth")
asset.require("scene/solarsystem/planets/saturn/trail_earth")
asset.require("scene/solarsystem/planets/uranus/trail_earth")
asset.require("scene/solarsystem/planets/neptune/trail_earth")

local fullCycleAction = {
  Identifier = "os.epicycle.setfull",
  Name = "Set full epicycles",
  Documentation = [[Sets EnableFade to false for all epicycle trails so that 
  they show the entire period]],
  Command = [[openspace.setPropertyValue("*TrailEarth.Renderable.Appearance.EnableFade", false);]],
  GuiPath = "/Trails/Epicycle",
  IsLocal = false
}

local fadedCycleAction = {
  Identifier = "os.epicycle.setfaded",
  Name = "Set faded epicycles",
  Documentation = [[Sets EnableFade to true for all epicycle trails so that 
  they match the default planet trails]],
  Command = [[openspace.setPropertyValue("*TrailEarth.Renderable.Appearance.EnableFade", true);]],
  GuiPath = "/Trails/Epicycle",
  IsLocal = false
}

local showCyclesAction = {
  Identifier = "os.epicycle.showtrails",
  Name = "Enable/Show epicycles",
  Documentation = [[Enables and shows in all epicycle trails]],
  Command = [[openspace.setPropertyValue("*TrailEarth.Renderable.Enabled", true);
  openspace.setPropertyValue("*TrailEarth.Renderable.Fade", 1, 2);
  ]],
  GuiPath = "/Trails/Epicycle",
  IsLocal = false
}

local fadeoutCyclesAction = {
  Identifier = "os.epicycle.hidetrails",
  Name = "Hide epicycles",
  Documentation = [[Hides all epicycle trails]],
  Command = [[openspace.setPropertyValue("*TrailEarth.Renderable.Fade", 0, 2);]],
  GuiPath = "/Trails/Epicycle",
  IsLocal = false
}


asset.onInitialize(function()
  openspace.action.registerAction(fullCycleAction)
  openspace.action.registerAction(fadedCycleAction)
  openspace.action.registerAction(showCyclesAction)
  openspace.action.registerAction(fadeoutCyclesAction)
end)

asset.onDeinitialize(function()
  openspace.action.removeAction(fadeoutCyclesAction)
  openspace.action.removeAction(showCyclesAction)
  openspace.action.removeAction(fadedCycleAction)
  openspace.action.removeAction(fullCycleAction)
end)



asset.meta = {
  Name = "Epicycle",
  Version = "1.0",
  Description = [[This asset includes the trails of the planets from earth.
  In addition, it provides some actions for manipulating them.]],
  Author = "OpenSpace Team",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
