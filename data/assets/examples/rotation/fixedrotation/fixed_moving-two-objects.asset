-- Basic Moving (Two Objects)
-- This asset creates a rotation that places a coordinate axes orbiting close to two
-- spheres with the y axis always pointing towards the first sphere and the z axis always
-- pointing towards the second sphere as the coordinate system moves around. Note that in
-- this example the coordinate system will be skewed as, in general, it is not guaranteed
-- that the direction from the node to the two spheres will be an orthogonal vector.

local Sphere1 = {
  Identifier = "FixedRotation_Example_Moving_TwoObjects_Sphere1",
  Transform = {
    Translation = {
      Type = "StaticTranslation",
      Position = { 3.0, -2.0, 0.0 }
    }
  },
  Renderable = {
    Type = "RenderableSphericalGrid"
  },
  GUI = {
    Name = "FixedRotation - Basic Moving Two Objects (Sphere 1)",
    Path = "/Examples"
  }
}

local Sphere2 = {
  Identifier = "FixedRotation_Example_Moving_TwoObjects_Sphere2",
  Renderable = {
    Type = "RenderableSphericalGrid"
  },
  GUI = {
    Name = "FixedRotation - Basic Moving Two Objects (Sphere 2)",
    Path = "/Examples"
  }
}

local Node = {
  Identifier = "FixedRotation_Example_Moving_TwoObjects",
  Parent = "FixedRotation_Example_Moving_TwoObjects_Sphere1",
  Transform = {
    Translation = {
      Type = "KeplerTranslation",
      Eccentricity = 0.5,
      SemiMajorAxis = 0.0025,
      Inclination = 0.0,
      AscendingNode = 0.0,
      ArgumentOfPeriapsis = 0.0,
      MeanAnomaly = 0.0,
      Epoch = "2000 JAN 01 12:00:00",
      Period = 10.0
    },
    Rotation = {
      Type = "FixedRotation",
      Attached = "FixedRotation_Example_Moving_TwoObjects",
      YAxis = "FixedRotation_Example_Moving_TwoObjects_Sphere1",
      YAxisOrthogonal = true,
      ZAxis = "FixedRotation_Example_Moving_TwoObjects_Sphere2"
    }
  },
  Renderable = {
    Type = "RenderableCartesianAxes"
  },
  GUI = {
    Name = "FixedRotation - Basic Moving Two Objects",
    Path = "/Examples"
  }
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(Sphere1)
  openspace.addSceneGraphNode(Sphere2)
  openspace.addSceneGraphNode(Node)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(Node)
  openspace.removeSceneGraphNode(Sphere2)
  openspace.removeSceneGraphNode(Sphere1)
end)
