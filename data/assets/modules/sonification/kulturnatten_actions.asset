local constellationsCSV = asset.localResource("constellation_data.csv")
local transforms = asset.require("scene/solarsystem/sun/transforms")
local constellations_helper = asset.require("util/constellations_helper")

--local zodiacs = {
--  "CNC", "TAU", "PSC", "ARI", "LIB", "AQR", "CAP", "SCO", "VIR", "SGR", "GEM", "LEO"
--}

---local zodiacs = {
---  "APS", "AQL", "COL", "CRV", "CYG", "GRU", "PAV", "TUC"
---}





local enable_cosmicplanet = {
  Identifier = "module.sonification.enable.cosmicplanet",
  Name = "A. Earth&Stars",
  Command = [[

    local navState = { Up = {-0.7576672111209941, -0.17453402491439934, 0.6288706316400182}, Pitch = -0.005408597124228873, Anchor = "Earth", Yaw = -0.005394233067171395, Position = {17437796.895799384, 6591989.028259964, 22838677.140913013} }
    openspace.setPropertyValueSingle("RenderEngine.HorizFieldOfView", 120.000000)


    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.ColorLayers.Blue_Marble.Enabled", true)
	  openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Enabled", true)
	  openspace.setPropertyValueSingle("Scene.Earth.Renderable.Enabled", true)
  
    openspace.setPropertyValueSingle("Scene.Stars.Renderable.Enabled", true)

    openspace.setPropertyValueSingle("Scene.birds_consensus_species.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)
	  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
	  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

    --False
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.GeoJson.Points-Example.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Enabled", false);
    openspace.setPropertyValue("Scene.ImageConstellation*.Renderable.Enabled", false);

    openspace.pathnavigation.flyToNavigationState(navState, 0.0)
	

  ]],
  Documentation = "Enables the planets sonification, turn off the cosmic points and jumps to Earth",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local enable_geomarkers = {
  Identifier = "module.sonification.enable.geomarkers",
  Name = "B. Show Geomarkers",
  Command = [[

    openspace.setPropertyValueSingle("Scene.Earth.Renderable.GeoJson.Points-Example.Enabled", true)

  ]],
  Documentation = "Enables the planets sonification, turn off the cosmic points and jumps to Earth",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local ShowConstellations = {
  Identifier = "module.sonification.enable.ShowConstellations",
  Name = "C. Show constellations",
  Command = [[
    openspace.setPropertyValueSingle("Scene.Constellations.Renderable.ConstellationSelection", {})
    openspace.fadeIn("Scene.Constellations.Renderable")

    --openspace.fadeOut("Scene.Constellations.Renderable", nil, "openspace.setPropertyValueSingle('Scene.Constellations.Renderable.Enabled', false); openspace.setPropertyValueSingle('Scene.Constellations.Renderable.ConstellationSelection', {})")

  ]],
  Documentation = "Shows all the constellations lines",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}
local ShowArt = {
  Identifier = "module.sonification.enable.ConstellationArt",
  Name = "D. Show constellation art",
  Command = [[
    openspace.setPropertyValue("Scene.ImageConstellation*.Renderable.Enabled", true)
    openspace.fadeIn("Scene.ImageConstellation*.Renderable")
	
  ]],
  Documentation = "Enables and fades up constellation art work",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local ShowBirdConstArt = {
  Identifier = "module.sonification.enable.ShowBirdConstArt",
  Name = "E. Show only Bird Constellations Art",
  Command = [[
    --openspace.fadeIn("{bird}")
	openspace.fadeOut("{northern}")
	openspace.fadeOut("{southern}")
	openspace.fadeOut("{equatorial}")
	openspace.fadeOut("{zodiac}")
  ]],
  Documentation = "Enables only Bird Constellations art",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local fade_out = {
  Identifier = "module.sonification.fade_out",
  Name = "F. Fade Out",
  Command = [[

    openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 0.0, 1.0)
    --openspace.fadeIn("RenderEngine.BlackoutFactor")
	
	--openspace.fadeIn("RenderEngine.BlackoutFactor", nil, "openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 0); openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 1)")
	
  ]],
  Documentation = "Fade out",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local enable_cosmicdata = {
  Identifier = "module.sonification.enable.cosmicdata",
  Name = "G. Enable cosmic data V2_L28",
  Command = [[


    local navState = { Yaw = 0.005573284314233272, Position = { [1] = 888856460.7948432, [2] = 552856715.2096369, [3] = -352003664.04601175 }, Pitch = 0.0012216224241184976, Up = { [1] = -0.5922238921526191, [2] = 0.6427349311065496, [3] = -0.48596570856292143 }, Anchor = "birds_mMDS_xyz_sphere_V2_lineage_29", ReferenceFrame = "Root" }

    openspace.setPropertyValue("{planet_solarSystem}.Renderable.Enabled", false)
    openspace.setPropertyValue("{planetTrail_solarSystem}.Renderable.Enabled", false)
    openspace.setPropertyValue("{moon_solarSystem}.Renderable.Enabled", false)
    openspace.setPropertyValue("{moonTrail_solarSystem}.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Moon.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.MoonTrail.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.ColorLayers.Blue_Marble.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.ColorLayers.ESRI_VIIRS_Combo.Enabled", false)

    openspace.setPropertyValueSingle("Scene.VenusAtmosphere.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.MarsAtmosphere.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.TitanAtmosphere.Renderable.Enabled", false)

    openspace.setPropertyValueSingle("Scene.SunGlare.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.MilkyWayGalaxyImage.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.MilkyWay.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.MilkyWayVolume.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Stars.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.SunStar.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Planck.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.SloanDigitalSkySurvey.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.TullyGalaxies.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.TullyGalaxiesImages.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Quasars.Renderable.Enabled", false)

   

    --openspace.setPropertyValueSingle("Scene.birds_consensus_species.Renderable.Enabled", true)
    --openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", true)

    openspace.setPropertyValueSingle("Modules.Sonification.PlanetsSonification.Enabled", false)
    openspace.setPropertyValueSingle("Modules.Sonification.CompareSonification.Enabled", false)
    openspace.setPropertyValueSingle("Modules.Sonification.SolarSonification.Enabled", false)

    openspace.setPropertyValueSingle("Modules.Sonification.Enabled", true)
    openspace.setPropertyValueSingle("Modules.Sonification.CosmicSonification.Enabled", true)
	
    --False
    openspace.setPropertyValueSingle("Scene.EarthAtmosphere.Renderable.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.GeoJson.Points-Example.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.HeightLayers.Terrain_tileset.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.NightLayers.Earth_at_Night_2012.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Earth.Renderable.Layers.WaterMasks.MODIS_Water_Mask.Enabled", false)
    openspace.setPropertyValueSingle("Scene.Constellations.Renderable.Enabled", false);
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)



    --openspace.setPropertyValue("Scene.ImageConstellation*.Renderable.Enabled", false)
    openspace.fadeOut("Scene.ImageConstellation*.Renderable")

	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", true)

  openspace.pathnavigation.flyToNavigationState(navState, 0.0)


  ]],
  Documentation = "Actions for Kulturnatten Cosmic View show",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local fade_in = {
  Identifier = "module.sonification.fade_in",
  Name = "H. Fade in",
  Command = [[
  
  
    openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 1.0, 1.0)
    --openspace.fadeIn("RenderEngine.BlackoutFactor")

	--openspace.fadeIn("RenderEngine.BlackoutFactor", nil, "openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 1); openspace.setPropertyValueSingle("RenderEngine.BlackoutFactor", 0)")


  ]],
  Documentation = "Fade in",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local enable_birds_mMDS_xyz_sphere_V2_lineage_29_3Dprojection = {
  Identifier = "module.sonification.enable.birds_mMDS_xyz_sphere_V2_lineage_29_3Dprojection",
  Name = "I. Enable V2_L29",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", true)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", true)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)
  ]],
  Documentation = "Enable V2_L29",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

local enable_birds_UMAP_xyz_3Dprojection = {
  Identifier = "module.sonification.enable.birds_UMAP_xyz_3Dprojection",
  Name = "J. Enable UMAP_CenteredOnRoot",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", true)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)

  ]],
  Documentation = "Enables birds_UMAP_xyz_3Dprojection",
  GuiPath = "/Kulturnatten",
  IsLocal = false
}

--DATA FOLDER

local enable_birds_lineage_29 = {
  Identifier = "module.sonification.enable.birds_lineage_29",
  Name = "birds_lineage_29",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", true)
  ]],
  Documentation = "Enables birds_lineage_29",
  GuiPath = "/Kulturnatten/Data",
  IsLocal = false
}

local enable_mMDS_xyz_3Dprojection = {
  Identifier = "module.sonification.enable.mMDS_xyz_3Dprojection",
  Name = "mMDS_xyz_3Dprojection",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", true)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)
  ]],
  Documentation = "Enables mMDS_xyz_3Dprojection",
  GuiPath = "/Kulturnatten/Data",
  IsLocal = false
}

local enable_birds_mMDS_xyz_sphere_3Dprojection = {
  Identifier = "module.sonification.enable.birds_mMDS_xyz_sphere_3Dprojection",
  Name = "birds_mMDS_xyz_sphere_3Dprojection",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", true)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)
  ]],
  Documentation = "Enables birds_mMDS_xyz_sphere_3Dprojection",
  GuiPath = "/Kulturnatten/Data",
  IsLocal = false
}

local enable_birds_mMDS_xy_3Dprojection = {
  Identifier = "module.sonification.enable.birds_mMDS_xy_3Dprojection",
  Name = "birds_mMDS_xy_3Dprojection",
  Command = [[

  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_28.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_V2_lineage_29.Renderable.Enabled", false)

  openspace.setPropertyValueSingle("Scene.birds_UMAP_xyz_CenteredOnRoot_lineage_29.Renderable.Enabled", false)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xy_3Dprojection_lineage_29.Renderable.Enabled", true)
  openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_sphere_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_mMDS_xyz_3Dprojection_lineage_29.Renderable.Enabled", false)
	openspace.setPropertyValueSingle("Scene.birds_lineage_29.Renderable.Enabled", false)

  ]],
  Documentation = "Enables birds_mMDS_xy_3Dprojection",
  GuiPath = "/Kulturnatten/Data",
  IsLocal = false
}




asset.onInitialize(function ()
  openspace.action.registerAction(enable_cosmicplanet)
  openspace.action.registerAction(enable_geomarkers)
  openspace.action.registerAction(ShowConstellations)
  openspace.action.registerAction(ShowArt)
  openspace.action.registerAction(enable_cosmicdata)
  openspace.action.registerAction(enable_birds_lineage_29)
  openspace.action.registerAction(enable_mMDS_xyz_3Dprojection)
  openspace.action.registerAction(enable_birds_mMDS_xyz_sphere_3Dprojection)
  openspace.action.registerAction(fade_in)
  openspace.action.registerAction(fade_out)
  openspace.action.registerAction(enable_birds_mMDS_xy_3Dprojection)
  openspace.action.registerAction(enable_birds_UMAP_xyz_3Dprojection)
  openspace.action.registerAction(ShowBirdConstArt)
  openspace.action.registerAction(enable_birds_mMDS_xyz_sphere_V2_lineage_29_3Dprojection)
  
  
  

end)

asset.onDeinitialize(function ()
  openspace.action.registerAction(enable_cosmicplanet)
  openspace.action.registerAction(enable_geomarkers)
  openspace.action.registerAction(ShowConstellations)
  openspace.action.registerAction(ShowArt)
  openspace.action.registerAction(enable_cosmicdata)
  openspace.action.registerAction(enable_birds_lineage_29)
  openspace.action.registerAction(enable_mMDS_xyz_3Dprojection)
  openspace.action.registerAction(enable_birds_mMDS_xyz_sphere_3Dprojection)
  openspace.action.registerAction(fade_in)
  openspace.action.registerAction(fade_out)
  openspace.action.registerAction(enable_birds_mMDS_xy_3Dprojection)
  openspace.action.registerAction(enable_birds_UMAP_xyz_3Dprojection)
  openspace.action.registerAction(ShowBirdConstArt)
  openspace.action.registerAction(enable_birds_mMDS_xyz_sphere_V2_lineage_29_3Dprojection)
  
end)

asset.meta = {
  Name = "Kulturnatten Actions",
  Version = "1.0",
  Description = "Actions that are relevant for kulturnatten",
  Author = "OpenSpace Team",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
