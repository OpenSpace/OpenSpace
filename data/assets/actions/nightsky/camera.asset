local level_horizon_yaw_action = {
  Identifier = "os.nightsky.level_horizon_yaw",
  Name = "Level Horizon Yaw",
  Command = [[
    local currentNavState = openspace.navigation.getNavigationState();
    local newNavState  = {};
    newNavState ["Pitch"] = currentNavState["Pitch"];
    newNavState ["Anchor"] = tostring(currentNavState["Anchor"]);
    newNavState ["Yaw"] = 0.0;
    newNavState ["Position"] = currentNavState["Position"];
    newNavState ["Up"] = currentNavState["Up"];
    openspace.navigation.setNavigationState(newNavState )
  ]],
  Documentation = "Levels the horizon horizontally.",
  GuiPath = "/Night Sky/View",
  IsLocal = true
}
asset.export("level_horizon_yaw_action", level_horizon_yaw_action.Identifier)

local level_horizon_pitch_action = {
  Identifier = "os.nightsky.level_horizon_pitch",
  Name = "Level Horizon Pitch",
  Command = [[
    local currentNavState = openspace.navigation.getNavigationState();
    local newNavState  = {};
    newNavState ["Pitch"] = 1.5707;
    newNavState ["Anchor"] = tostring(currentNavState["Anchor"]);
    newNavState ["Yaw"] = currentNavState["Yaw"];
    newNavState ["Position"] = currentNavState["Position"];
    newNavState ["Up"] = currentNavState["Up"];
    openspace.navigation.setNavigationState(newNavState )
  ]],
  Documentation = "Levels the horizon vertically.",
  GuiPath = "/Night Sky/View",
  IsLocal = true
}
asset.export("level_horizon_pitch_action", level_horizon_pitch_action.Identifier)


asset.onInitialize(function()
  openspace.action.registerAction(level_horizon_yaw_action)
  openspace.action.registerAction(level_horizon_pitch_action)
end)

asset.onDeinitialize(function()
  openspace.action.removeAction(level_horizon_yaw_action)
  openspace.action.removeAction(level_horizon_pitch_action)
end)


-- local currentNavState = openspace.navigation.getNavigationState();
--     local NewNavState = {};
--     NewNavState["Pitch"] = currentNavState["Pitch"];
--     NewNavState["Anchor"] = tostring(currentNavState["Anchor"]);
--     NewNavState["Yaw"] = currentNavState["Yaw"];
--     NewNavState["Position"] = currentNavState["Position"];
--     NewNavState["Up"] = {0,currentNavState["Up"][2],currentNavState["Up"][3]} ;
--     openspace.navigation.setNavigationState(NewNavState)