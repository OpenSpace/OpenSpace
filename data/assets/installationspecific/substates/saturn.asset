local util = asset.require('./../utility_functions')

----------------------------------------------------------------
-- STATES
----------------------------------------------------------------
local saturnTargetDistance = 36E7

local saturnState = {
  Identifier = "Saturn",
  Enter = [[
    ]] .. util.setOrbitSpeedFactor(0.4) .. [[
    ]] .. util.orbitOnArrival() .. [[
  ]],
  Exit = [[
    ]] .. util.stopOrbiting() .. [[
  ]]
}

local ringsTargetDistance = 36E7

local ringsState = {
  Identifier = "SaturnRings",
  Enter = [[
    ]] .. util.setOrbitSpeedFactor(0.4) .. [[
    ]] .. util.orbitOnArrival() .. [[
  ]],
  Exit = [[
    ]] .. util.stopOrbiting() .. [[
  ]]
}

local titanTargetDistance = 36E7

local titanState = {
  Identifier = "Titan",
  Enter = [[
    ]] .. util.setOrbitSpeedFactor(0.4) .. [[
    ]] .. util.orbitOnArrival() .. [[
  ]],
  Exit = [[
    ]] .. util.stopOrbiting() .. [[
  ]]
}

local cassiniTargetDistance = 36E7

local cassiniState = {
  Identifier = "Cassini",
  Enter = [[
    ]] .. util.setOrbitSpeedFactor(0.4) .. [[
    ]] .. util.orbitOnArrival() .. [[
  ]],
  Exit = [[
    ]] .. util.stopOrbiting() .. [[
  ]]
}

local huygensTargetDistance = 36E7

local huygensState = {
  Identifier = "Huygens",
  Enter = [[
    ]] .. util.setOrbitSpeedFactor(0.4) .. [[
    ]] .. util.orbitOnArrival() .. [[
  ]],
  Exit = [[
    ]] .. util.stopOrbiting() .. [[
  ]]
}

local states = { saturnState, ringsState, titanState, cassiniState, huygensState }

----------------------------------------------------------------
-- TRANSITIONS within this substate
----------------------------------------------------------------
local transitions = {
  {
    From = "Saturn",
    To = "SaturnRings",
    Action = [[]]
  },
  {
    From = "SaturnRings",
    To = "Saturn",
    Action = [[
      ]] .. util.disableLinearFlight() .. [[
      ]] .. util.setCurveType("ZoomOutOverview") .. [[
      openspace.time.setPause(true)
      openspace.pathnavigation.goTo('Saturn', true)
      ]] .. util.changeAnchor('Saturn', 1) .. [[
    ]]
  },
  {
    From = "Saturn",
    To = "Titan",
    Action = [[
      ]] .. util.disableLinearFlight() .. [[
      ]] .. util.setCurveType("ZoomOutOverview") .. [[
      openspace.time.setPause(true)
      openspace.pathnavigation.goTo('Titan', true)
      ]] .. util.changeAnchor('Titan', 1) .. [[
    ]]
  },
  {
    From = "Titan",
    To = "Saturn",
    Action = [[
      ]] .. util.disableLinearFlight() .. [[
      ]] .. util.setCurveType("ZoomOutOverview") .. [[
      openspace.time.setPause(true)
      openspace.pathnavigation.goTo('Saturn', true)
      ]] .. util.changeAnchor('Saturn', 1) .. [[
    ]]
  },
  {
    From = "Saturn",
    To = "Cassini",
    Action = [[]]
  },
  {
    From = "Cassini",
    To = "Saturn",
    Action = [[
      ]] .. util.disableLinearFlight() .. [[
      ]] .. util.setCurveType("ZoomOutOverview") .. [[
      openspace.time.setPause(true)
      openspace.pathnavigation.goTo('Saturn', true)
      ]] .. util.changeAnchor('Saturn', 1) .. [[
    ]]
  },
  {
    From = "Saturn",
    To = "Huygens",
    Action = [[]]
  },
  {
    From = "Huygens",
    To = "Saturn",
    Action = [[
      ]] .. util.disableLinearFlight() .. [[
      ]] .. util.setCurveType("ZoomOutOverview") .. [[
      openspace.time.setPause(true)
      openspace.pathnavigation.goTo('Saturn', true)
      ]] .. util.changeAnchor('Saturn', 1) .. [[
    ]]
  },
  -- Back to SolarSystem from substates
  {
    From = "SaturnRings",
    To = "SolarSystem"
  },
  {
    From = "Titan",
    To = "SolarSystem"
  },
  {
    From = "Cassini",
    To = "SolarSystem"
  },
  {
    From = "Huygens",
    To = "SolarSystem"
  }
}

asset.export("states", states)
asset.export("transitions", transitions)
