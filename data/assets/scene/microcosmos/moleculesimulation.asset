-- local sunTransforms = asset.require("scene/solarsystem/sun/transforms")

local moleculeDb = "https://home.thissma.fr/moldata/"

local moleculeFiles = asset.syncedResource({
  Name = "Molecule Files",
  Type = "UrlSynchronization",
  Identifier = "molecule_files",
  Url = {
    moleculeDb .. "67P-molecules/acetaldehyde.arc",
    moleculeDb .. "67P-molecules/acetic-acid.arc",
    moleculeDb .. "67P-molecules/butanal.arc",
    moleculeDb .. "67P-molecules/co2.arc",
    moleculeDb .. "67P-molecules/eg.arc",
    moleculeDb .. "67P-molecules/ethanol.arc",
    moleculeDb .. "67P-molecules/formaldehyde.arc",
    moleculeDb .. "67P-molecules/formic.arc",
    moleculeDb .. "67P-molecules/h2o.arc",
    moleculeDb .. "67P-molecules/methanol.arc",
    moleculeDb .. "67P-molecules/methyl-acetate.arc",
    moleculeDb .. "67P-molecules/n2.arc",
    moleculeDb .. "67P-molecules/o2.arc",
    moleculeDb .. "67P-molecules/propanal.arc",

    moleculeDb .. "aspirin/aspirin.gro",
    moleculeDb .. "aspirin/aspirin.xtc",
    moleculeDb .. "ice-melting/ice.gro",
    moleculeDb .. "ice-melting/ice.xtc",
    moleculeDb .. "c60.arc",
  }
})

local MoleculeSimulation = {
  Identifier = "MoleculeSimulation",
  -- Parent = sunTransforms.SunCenter.Identifier,
  Renderable = {
    Type = "RenderableSimulationBox",
    MoleculeFile = moleculeFiles .. "o2.arc",
    TrajectoryFile = moleculeFiles .. "o2.arc",
    MoleculeCount = 1000,
    LinearVelocity = 10.0,
    AngularVelocity = 60.0 / 360.0 * 3.14,
    SimulationBox = { 200.0, 200.0, 200.0 },
    CollisionRadius = 2.0,
  },
  GUI = {
    Path = "/Microcosmos/Molecules/Simulation"
  }
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(MoleculeSimulation)
end)
    
asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(MoleculeSimulation)
end)
    
asset.export(MoleculeSimulation)
