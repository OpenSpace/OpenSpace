local mars = asset.require("scene/solarsystem/planets/mars/mars")



local moleculeCO2 = asset.resource({
  Name = "Molecule CO2",
  Type = "HttpSynchronization",
  Identifier = "molecule_dynamics_co2",
  Version = 1
})


local Latitude = 58.5877
local Longitude = 16.1924

local MarsMolecules1km = {
  Identifier = "MarsMolecules1km",
  Parent = mars.Mars.Identifier,
  Transform = {
    Translation = {
      Type = "GlobeTranslation",
      Globe = mars.Mars.Identifier,
      Latitude = Latitude,
      Longitude = Longitude,
      Altitude = 1000.0
    }
  },
  Renderable = {
    Type = "RenderableSimulationBox",
    Molecules = {
      {
        MoleculeFile = moleculeCO2 .. "co2.arc",
        TrajectoryFile = moleculeCO2 .. "co2.arc",
        Count = 1
      }
    },
    LinearVelocity = 10.0,
    AngularVelocity = math.rad(60.0),
    SimulationBox = { 100.0, 100.0, 100.0 },
    CollisionRadius = 2.0,
    AnimationSpeed = 100
  },
  GUI = {
    Name = "Mars 1km",
    Path = "/Microcosmos/Atmosphere",
    Description = [[Visualizes Mars' atmosphere at a height of approximately 1km above the
      surface. As Mars' atmosphere almost exclusively consists of carbon dioxide, only
      that molecule is shown in the simulation box at an approximate density.]]
  }
}


asset.onInitialize(function()
  openspace.addSceneGraphNode(MarsMolecules1km)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(MarsMolecules1km)
end)

asset.export(MarsMolecules1km)



asset.meta = {
  Name = "Mars Atmosphere",
  Description = [[Visualizes Mars' atmosphere at the molecular scale.]],
  Author = "OpenSpace Team",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
