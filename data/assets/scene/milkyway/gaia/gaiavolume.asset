-- This asset requires OpenSpace to be built with the OPENSPACE_MODULE_VOLUME enabled

-- Before using this,
-- the volume data itself needs to be generated,
-- using the task 'data/tasks/gaia/gaia_volume.task'

local transforms = asset.require("scene/solarsystem/sun/transforms")

local astronomicalUnit = 3.0856776E16

local volume = {
  Identifier = "GeneratedVolume",
  Parent = transforms.SolarSystemBarycenter.Identifier,
  Transform = {
    Scale = {
      Type = "StaticScale",
      Scale = astronomicalUnit
    }
  },
  Renderable = {
    Type = "RenderableGaiaVolume",
    SourceDirectory = 'C:/Users/addee/OpenSpace/data/assets/scene/milkyway/gaia',
    TransferFunction = asset.localResource("transferfunction.png"),
    StepSize = 0.01,
    -- MinValue = 0,
    -- MaxValue = 1,
    GridType = "Cartesian",
    SecondsBefore = 50*365*24*60*60, -- 50 years before
    SecondsAfter = 50*365*24*60*60 -- 50 years after
  },
  GUI = {
    Path = "/Volumes"
  }
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(volume)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(volume)
end)

asset.export(volume)
