local transforms = asset.require("./transforms_magnetosphere")
local transferFunction = asset.localResource("./CMR-illuminance2.txt")


local gamera = {
  Identifier = "GAMERA",
  Parent = transforms.GSMReferenceFrame.Identifier,
  InteractionSphere = 6380000,  -- A value slightly bigger than earth radius
  Renderable = {
    Type = "RenderableFieldlinesSequence",
    SourceFolder = "C:/Users/aemolin/Documents/GAMERAdata/dirFL2",
    -- SourceFolder = "C:/Users/kjjohnst/Documents/GAMERAdata/dir",
  --SourceFolder = "/Users/juliajohnstone/Desktop/Exjobb/viz4sasha/dir",
    -- Hierarchy = {"/", "/Step#0" }, -- Hierarchical navigation in H5 file
    LineWidth = 1.0,
    ScalingUnit = "RE",
    -- AlphaBlendlingEnabled = false,
    InputFileType = "Hdf5",    -- OpenSpace Field lines sequence
    MaskingEnabled = true,
    MaskingQuantity = 5,      -- corresponds to "topology"
    -- MaskingRanges = {{-0, 0}},  --closed only
    ColorMethod = "By Quantity",
    ColorQuantity = 0, -- speed
    ColorTableRanges = {{50, 500}},
    ColorTablePaths = {transferFunction},
    -- ScaleToMeters = 1.0,
    Color = { 1.0, 0.725, 0.75, 0.8 },
  },
  GUI = {
    Path = "/Solar System/Planets/Earth",
    Name = "GAMERA"
  },
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(gamera)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(gamera)
end)

asset.export(gamera)
