local globe = asset.require("scene/solarsystem/planets/earth/earth")
--local imagePath = "C:/Users/alundkvi/Downloads/mothers_day_storm_data_for_bea/mothers_day_storm_data_for_bea/grid_gillam/rgb/2024/05/11/images3/"
--local imagePath = "C:/Users/alundkvi/Documents/work/scripts/scriptTest/skycameraImages/"
local imagePath = "C:/Users/alundkvi/Documents/work/scripts/scriptTest/skycameraImages/combined_images"



local Skycamera_sphere = {
  Identifier = "Skycamera_sphere",
  Parent = globe.Earth.Identifier,
  Enabled = asset.disabled,
  InteractionSphere = 6379137,
  Renderable = {
    Type = "RenderableTimeVaryingSphere",
    Size = 6381137.0, -- Slightly bigger than the sun renderable,
    Enabled = false,
    TextureSource = imagePath,
    Opacity = 1,
    RenderBinMode = "PostDeferredTransparent",
    Segments = 200
  },
  GUI = {
    Name = "Skycamera sphere",
    Path = "/Sky-Camera",
    Description = [[Texture sequence of an extreme ultra violet (EUV) simulation, during
      the CME. This asset contains data from 2000-07-14 08:38 to 2000-07-14 19:48]]
  }
}

local Toggleskycamera = {
  Identifier = "os.solarsystem.Toggleskycamera",
  Name = "Toggle Sky Camera",
  Command = [[
    if openspace.propertyValue("Scene.Skycamera_sphere.Renderable.Enabled") then
      openspace.setPropertyValueSingle(
        "Scene.Skycamera_sphere.Renderable.Fade",
        0.0,
        openspace.propertyValue("OpenSpaceEngine.FadeDuration"),
        "Linear",
        'openspace.setPropertyValueSingle("Scene.Skycamera_sphere.Renderable.Enabled", false)'
      )
    else
      openspace.setPropertyValueSingle("Scene.Skycamera_sphere.Renderable.Enabled", true)
      openspace.setPropertyValueSingle(
        "Scene.Skycamera_sphere.Renderable.Fade",
        1.0,
        openspace.propertyValue("OpenSpaceEngine.FadeDuration"),
        "Linear"
      )
    end
  ]],
  Documentation = "Toggle Sky Camera Layer",
  GuiPath = "/Sky-Camera",
  IsLocal = false
}

asset.onInitialize(function()
  openspace.action.registerAction(Toggleskycamera)
    openspace.addSceneGraphNode(Skycamera_sphere)
    openspace.setPropertyValueSingle("Scene.Skycamera_sphere.Rotation.Rotation", {0.000000,0.000000,-3.140000})
end)

asset.onDeinitialize(function()
  openspace.action.removeAction(Toggleskycamera)
    openspace.removeSceneGraphNode(Skycamera_sphere)
end)

asset.export("ToggleEuv", Toggleskycamera.Identifier)
asset.export(Skycamera_sphere)