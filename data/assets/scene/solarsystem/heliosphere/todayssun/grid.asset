local transforms = asset.require("scene/solarsystem/sun/transforms_heliosphere")
local sunTransforms = asset.require("scene/solarsystem/sun/transforms")

local size = 700000000


local carrington_prime_meridian = {
  Identifier = "carrington_prime_meridian",
  Parent = sunTransforms.SunIAU.Identifier,
  Transform = {
    Rotation = {
      Type = "StaticRotation",
      Rotation = { 0.0, 0.0, -1.57079633 } -- -90 degrees
    },
    Scale = {
      Type = "StaticScale",
      Scale = 698000000
    },
    Translation = {
      Type = "StaticTranslation",
      Position = { 3500000, 0, 0 }
    }
  },
  Renderable = {
    Type = "RenderableSphericalGrid",
    Enabled = true,
    Size = size,
    Opacity = 1.0,
    Color = { 1.0, 1.0, 0.0 },
    LineWidth = 2.0,
    LongSegments = 2,
    LatSegments = 64
  },
  GUI = {
    Name = "Carrington Prime Meridian",
    Path =  "/Solar System/Heliosphere",
    Description = [[A 2x64 spherical grid showing the Carrington prime meridian]]
  }
}

local grid_slice = {
  Identifier = "WSA_grid_slice",
  Parent = transforms.HeliocentricEarthEquatorial.Identifier,
  Transform = {
    Rotation = {
      Type = "StaticRotation",
      Rotation = { 0.0, 0.0, -1.57079633 } -- -90 degrees
    },
    Scale = {
      Type = "StaticScale",
      Scale = size
    }
  },
  Renderable = {
    Type = "RenderableSphericalGrid",
    Enabled = true,
    Size = size,
    Opacity = 1.0,
    Color = { 0.8, 0.8, 0.8 },
    LineWidth = 2.0,
    LongSegments = 2,
    LatSegments = 64
  },
  GUI = {
    Name = "Longitude at Sun-Earth line",
    Path =  "/Solar System/Heliosphere",
    Description = [[A grid with 10 degree seperationg between line segments]]
  }
}

local grid_10deg = {
  Identifier = "WSA_grid_10_degrees",
  Parent = transforms.HeliocentricEarthEquatorial.Identifier,
  Transform = {
    Scale = {
      Type = "StaticScale",
      Scale = size
    }
  },
  Renderable = {
    Type = "RenderableSphericalGrid",
    Enabled = true,
    Size = size,
    Opacity = 1.0,
    Color = { 0.035, 0.675, 0.255 },
    LineWidth = 1.0,
    Segments = 36
  },
  GUI = {
    Name = "Grid on Sun",
    Path =  "/Solar System/Heliosphere",
    Description = [[A grid aligned with the Sun-Earth line. 10 degree seperationg between line segments on default]]
  }
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(carrington_prime_meridian)
  openspace.addSceneGraphNode(grid_slice)
  openspace.addSceneGraphNode(grid_10deg)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(grid_10deg)
  openspace.removeSceneGraphNode(grid_slice)
  openspace.removeSceneGraphNode(carrington_prime_meridian)
end)

asset.export(carrington_prime_meridian)
asset.export(grid_slice)
asset.export(grid_10deg)



asset.meta = {
  Name = "Real Time Sun Grid lines",
  Version = "1.0",
  Description = [[Grids to guide the orientation of the Sun and its rotation in relation to Earth.]],
  Author = "CCMC",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
