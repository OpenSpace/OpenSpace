local helper = asset.require('util/slide_deck_helper')
local deckL = nil
local deckR = nil

-- images from https://www.lroc.asu.edu/featured_sites/view_site/1
local slides = asset.syncedResource({
    Name = "Apollo slides",
    Type = "HttpSynchronization",
    Identifier = "apollo_slideshows",
    Version = 1
})

asset.onInitialize(function ()
    deckL = helper.createDeck("slides-apollo14-left", {
        FlatScreen = false,
        SphericalPosition = {3.14159, 2.244},
        Scale = 0.70
    })



    helper.addSlide(deckL, slides .. "/apollo_14/A14-2-LEM-flag-glare.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-3-LEM-tilt.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-4-port-FP-slip.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-5-camera.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-5-view.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-6-MET-cover.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-7-map.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-8-where.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-9-look-back.jpg")
    helper.addSlide(deckL, slides .. "/apollo_14/A14-10-Earth-LEM.jpg")


    helper.addSlide(deckL, slides .."/apollo_14/M148278998L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M132943081R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M117609776R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M102265088L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M150639913L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M150633128L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M119971387R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M104634241L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M104627085L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M168319885LR.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M152994220R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M106985205L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M170674592L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M140019848R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M124687860R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M109345337L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M157709871R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M127049821R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M111708164L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M175388134R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M129404545R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M114071006LR.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M114064206L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M162426054L.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/M131765772R.jpg")
    helper.addSlide(deckL, slides .."/apollo_14/legend.PNG")

    deckR = helper.createDeck("slides-apollo14-right", {
        FlatScreen = false,
        SphericalPosition = {-0.12, 2.208},
        Scale = 0.70
    })

    helper.addSlide(deckR, slides .. "/apollo_14/A14-2-LEM-flag-glare.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-3-LEM-tilt.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-4-port-FP-slip.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-5-camera.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-5-view.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-6-MET-cover.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-7-map.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-8-where.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-9-look-back.jpg")
    helper.addSlide(deckR, slides .. "/apollo_14/A14-10-Earth-LEM.jpg")

    helper.addSlide(deckR, slides .."/apollo_14/M148278998L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M132943081R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M117609776R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M102265088L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M150639913L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M150633128L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M119971387R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M104634241L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M104627085L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M168319885LR.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M152994220R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M106985205L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M170674592L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M140019848R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M124687860R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M109345337L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M157709871R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M127049821R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M111708164L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M175388134R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M129404545R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M114071006LR.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M114064206L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M162426054L.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/M131765772R.jpg")
    helper.addSlide(deckR, slides .."/apollo_14/legend.PNG")

   

    local interpolationDuration = 0

    function nextSlide()
        helper.goToNextSlide(deckL, interpolationDuration)
        helper.goToNextSlide(deckR, interpolationDuration)
    end

    function previousSlide()
        helper.goToPreviousSlide(deckL, interpolationDuration)
        helper.goToPreviousSlide(deckR, interpolationDuration)
    end

    helper.setCurrentSlide(deckL, 1)
    helper.setCurrentSlide(deckR, 1)
    openspace.bindKey("RIGHT", "nextSlide()")
    openspace.bindKey("LEFT", "previousSlide()")

end)


asset.onDeinitialize(function()
    openspace.clearKey("RIGHT")
    openspace.clearKey("LEFT")
    helper.removeDeck(deckL)
    helper.removeDeck(deckR)
end)