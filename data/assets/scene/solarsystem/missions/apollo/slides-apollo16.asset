local helper = asset.require('util/slide_deck_helper')
local deckL = nil
local deckR = nil

-- images from https://www.lroc.asu.edu/featured_sites/view_site/1
local slides = asset.syncedResource({
    Name = "Apollo slides",
    Type = "HttpSynchronization",
    Identifier = "apollo_slideshows",
    Version = 1
})

asset.onInitialize(function ()
    deckL = helper.createDeck("slides-apollo16-left", {
        FlatScreen = false,
        SphericalPosition = {3.14159, 2.244},
        Scale = 0.70
    })

    helper.addSlide(deckL, slides .."/apollo_16/A16-1-Earth1.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-2-Earth2.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-3-LEM.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-4-LEM-far.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-5-CharlieRover.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-6-rover-eva2.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-7-SouthRay.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-8-SouthRay3.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-9-BabyRay.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-10-RoverJohn.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-11-UVtelescope.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-12-NorthRay1.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-13-NorthRay2.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-14-NorthRay3.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-15-NorthRay4.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-16-EVA3-upshot.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-17-EVA3-upshotCLOSE.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-18-HouseRock.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-19-LEMfromRoverSMALL.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-20-LEM-fromRoverEVA3.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-21-LEMfromRover-closer.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-22-RoverLEM-UVtelescope.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-23-DukeFamilySMALL.jpg")
    helper.addSlide(deckL, slides .."/apollo_16/A16-24-DukeFamily.jpg")

    helper.addSlide(deckL, slides .. "/apollo_16/M132732855R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M117392541L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M102064759R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M152777016R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M152770233R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M106777343R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M122108795L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M155131889L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M109134835L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M142164190R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M126825870L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M175179080LR.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M144524996L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M129187331L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M113853974R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M177535538L.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M131548593R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/M116215545R.jpg")
    helper.addSlide(deckL, slides .. "/apollo_16/legend.PNG")


    deckR = helper.createDeck("slides-apollo16-right", {
        FlatScreen = false,
        SphericalPosition = {-0.12, 2.208},
        Scale = 0.70
    })

    helper.addSlide(deckR, slides .."/apollo_16/A16-1-Earth1.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-2-Earth2.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-3-LEM.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-4-LEM-far.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-5-CharlieRover.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-6-rover-eva2.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-7-SouthRay.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-8-SouthRay3.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-9-BabyRay.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-10-RoverJohn.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-11-UVtelescope.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-12-NorthRay1.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-13-NorthRay2.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-14-NorthRay3.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-15-NorthRay4.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-16-EVA3-upshot.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-17-EVA3-upshotCLOSE.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-18-HouseRock.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-19-LEMfromRoverSMALL.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-20-LEM-fromRoverEVA3.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-21-LEMfromRover-closer.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-22-RoverLEM-UVtelescope.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-23-DukeFamilySMALL.jpg")
    helper.addSlide(deckR, slides .."/apollo_16/A16-24-DukeFamily.jpg")

    helper.addSlide(deckR, slides .. "/apollo_16/M132732855R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M117392541L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M102064759R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M152777016R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M152770233R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M106777343R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M122108795L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M155131889L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M109134835L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M142164190R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M126825870L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M175179080LR.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M144524996L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M129187331L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M113853974R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M177535538L.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M131548593R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/M116215545R.jpg")
    helper.addSlide(deckR, slides .. "/apollo_16/legend.PNG")

    local interpolationDuration = 0

    function nextSlide()
        helper.goToNextSlide(deckL, interpolationDuration)
        helper.goToNextSlide(deckR, interpolationDuration)
    end

    function previousSlide()
        helper.goToPreviousSlide(deckL, interpolationDuration)
        helper.goToPreviousSlide(deckR, interpolationDuration)
    end

    helper.setCurrentSlide(deckL, 1)
    helper.setCurrentSlide(deckR, 1)
    openspace.bindKey("RIGHT", "nextSlide()")
    openspace.bindKey("LEFT", "previousSlide()")

end)


asset.onDeinitialize(function()
    openspace.clearKey("RIGHT")
    openspace.clearKey("LEFT")
    helper.removeDeck(deckL)
    helper.removeDeck(deckR)
end)