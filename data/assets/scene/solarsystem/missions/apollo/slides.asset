local helper = asset.require('util/slide_deck_helper')
local deck = nil

asset.onInitialize(function ()
    deckL = helper.createDeck("leftSlides", {
        FlatScreen = false,
        -- SphericalPosition = {0.0, 3.1415 / 2},
       SphericalPosition = {3.14159, 2.244},
        Scale = 0.64
    })

    helper.addSlide(deckL, "${DATA}/apollo_photos/0.jpg")
    helper.addSlide(deckL, "${DATA}/apollo_photos/1.jpg")
    helper.addSlide(deckL, "${DATA}/apollo_photos/2.jpg")
    helper.addSlide(deckL, "${DATA}/apollo_photos/3.jpg")


    deckR = helper.createDeck("rightSlides", {
        FlatScreen = false,
        SphericalPosition = {-0.12, 2.20},
        Scale = 0.64
    })

    helper.addSlide(deckR, "${DATA}/apollo_photos/0.jpg")
    helper.addSlide(deckR, "${DATA}/apollo_photos/1.jpg")
    helper.addSlide(deckR, "${DATA}/apollo_photos/2.jpg")
    helper.addSlide(deckR, "${DATA}/apollo_photos/3.jpg")


    local interpolationDuration = 0

    function nextSlide()
        helper.goToNextSlide(deckL, interpolationDuration)
        helper.goToNextSlide(deckR, interpolationDuration)
    end

    function previousSlide()
        helper.goToPreviousSlide(deckL, interpolationDuration)
        helper.goToPreviousSlide(deckR, interpolationDuration)
    end

    helper.setCurrentSlide(deckL, 1)
    helper.setCurrentSlide(deckR, 1)
    openspace.bindKey("RIGHT", "nextSlide()")
    openspace.bindKey("LEFT", "previousSlide()")

end)


asset.onDeinitialize(function()
    openspace.clearKey("RIGHT")
    openspace.clearKey("LEFT")
    helper.removeDeck(deckL)
    helper.removeDeck(deckR)
end)