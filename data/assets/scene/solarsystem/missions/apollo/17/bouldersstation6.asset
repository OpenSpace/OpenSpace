local sun = asset.require("scene/solarsystem/sun/transforms")
local moon = asset.require("scene/solarsystem/planets/earth/moon/moon")



local models = asset.resource({
  Name = "Apollo Boulders Models",
  Type = "HttpSynchronization",
  Identifier = "apollo_boulders",
  Version = 2
})


local Station6Frag1Model = {
  Identifier = "Station6Frag1Model",
  Parent = moon.Moon.Identifier,
  Transform = {
    Translation = {
      Type = "GlobeTranslation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.8007,
      Latitude = 20.2903,
      Altitude = 0.4,
      UseHeightmap = true
    },
    Rotation = {
      Type = "GlobeRotation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.8007,
      Latitude = 20.2903,
      Altitude = 0,
      UseHeightmap = false
    }
  },
  Renderable = {
    Type = "RenderableModel",
    GeometryFile = models .. "A17-S6-frag1.obj",
    RotationVector = { 270.0, 60.0, 0.0 },
    LightSources = {
      sun.LightSource,
      {
        Identifier = "Camera",
        Type = "CameraLightSource",
        Intensity = 0.5
      }
    },
    PerformShading = true,
    AmbientIntensity = 0.4,
    DiffuseIntensity = 0.0,
    SpecularIntensity = 0.0,
    EnableFaceCulling = false,
    ModelScale = 0.1
  },
  GUI = {
    Name = "Station 6 Fragment 1 Model",
    Path = "/Solar System/Missions/Apollo/17/Station 6"
  }
}

local Station6Frag2Model = {
  Identifier = "A17S6F5",
  Parent = moon.Moon.Identifier,
  Transform = {
    Translation = {
      Type = "GlobeTranslation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.80055,
      Latitude = 20.289808,
      Altitude = 0.5,
      UseHeightmap = true
    },
    Rotation = {
      Type = "GlobeRotation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.80055,
      Latitude = 20.289808,
      Altitude = 0,
      UseHeightmap = false
    }
  },
  Renderable = {
    Type = "RenderableModel",
    GeometryFile = models .. "station6_boulder_frag2.obj",
    RotationVector = { 0.0, 132.0, 0.0 },
    LightSources = {
      sun.LightSource,
      {
        Identifier = "Camera",
        Type = "CameraLightSource",
        Intensity = 0.5
      }
    },
    PerformShading = true,
    AmbientIntensity = 0.4,
    DiffuseIntensity = 0.0,
    SpecularIntensity = 0.0,
    EnableFaceCulling = false,
    ModelScale = 0.15
  },
  GUI = {
    Name = "Station 6 Fragment 2 Model",
    Path = "/Solar System/Missions/Apollo/17/Station 6"
  }
}

local Station6Frag3Model = {
  Identifier = "A17S6F3",
  Parent = moon.Moon.Identifier,
  Transform = {
    Translation = {
      Type = "GlobeTranslation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.80053,
      Latitude = 20.29030,
      Altitude = -1,
      UseHeightmap = true
    },
    Rotation = {
      Type = "GlobeRotation",
      Globe = moon.Moon.Identifier,
      Longitude = 30.80053,
      Latitude = 20.29030,
      Altitude = 0,
      UseHeightmap = false
    }
  },
  Renderable = {
    Type = "RenderableModel",
    GeometryFile = models .. "station6_boulder_frag3.obj",
    RotationVector = { 0.0, 170.0, 0.0 },
    LightSources = {
      sun.LightSource,
      {
        Identifier = "Camera",
        Type = "CameraLightSource",
        Intensity = 0.5
      }
    },
    PerformShading = true,
    EnableFaceCulling = false,
    AmbientIntensity = 0.4,
    DiffuseIntensity = 0.0,
    SpecularIntensity = 0.0,
    ModelScale = 0.14
  },
  GUI = {
    Name = "Station 6 Fragment 3 Model",
    Path = "/Solar System/Missions/Apollo/17/Station 6"
  }
}


asset.onInitialize(function()
  openspace.addSceneGraphNode(Station6Frag1Model)
  openspace.addSceneGraphNode(Station6Frag2Model)
  openspace.addSceneGraphNode(Station6Frag3Model)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(Station6Frag3Model)
  openspace.removeSceneGraphNode(Station6Frag2Model)
  openspace.removeSceneGraphNode(Station6Frag1Model)
end)

asset.export(Station6Frag1Model)
asset.export(Station6Frag2Model)
asset.export(Station6Frag3Model)



asset.meta = {
  Name = "Apollo 17 - Boulder Station 6",
  Description = [[This asset shows 3D models of the fragments at station 6, which have
    been reconstructed from the imagery taken of the Apollo 17 crew.]],
  Author = "OpenSpace Team",
  URL = "http://openspaceproject.com",
  License = "MIT license"
}
