local sunTransforms = asset.require('scene/solarsystem/sun/transforms')
local transforms = asset.require('./transforms')

local model = asset.syncedResource({
  Name = "JUICE Model",
  Type = "HttpSynchronization",
  Identifier = "juice_models",
  Version = 1
})

local JuiceModel = {
  Identifier = "JuiceModel",
  Parent = transforms.Juice.Identifier,
  Transform = {
    Translation = {
      Type = "StaticTranslation",
      -- Offset numbers found by eyeballing
      Position = { 4.5, 0.0, -1.0 }
    },
    Rotation = {
      Type = "StaticRotation",
      Rotation = { 3.141592654 / 2.0, 0.0, 0.0 }
    },
    Scale = {
      Type = "StaticScale",
      Scale = 0.01
    }
  },
  Renderable = {
    Type = "RenderableModel",
    Body = "JUICE",
    GeometryFile = model .. "/juice.fbx",
    LightSources = {
      {
        Type = "SceneGraphLightSource",
        Identifier = "Sun",
        Node = sunTransforms.SolarSystemBarycenter.Identifier,
        Intensity = 0.08
      },
      {
        Identifier = "Camera",
        Type = "CameraLightSource",
        Intensity = 0.4,
        Enabled = false
      }
    }
  },
  GUI = {
    Name = "Juice Model",
    Path = "/Solar System/Missions/Juice"
  }
}


asset.onInitialize(function()
  openspace.addSceneGraphNode(JuiceModel)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(JuiceModel)
end)

asset.export(JuiceModel)

assetHelper.registerSceneGraphNodesAndExport(asset, { JuiceModel })
