local transforms = asset.require("scene/solarsystem/planets/earth/transforms")

local kernels = asset.syncedResource({
  Name = "Earth Moon Co-revolving Kernels",
  Type = "HttpSynchronization",
  Identifier = "earth_moon_corev_kernels",
  Version = 1
})

local EarthMoonCoRevFrame = {
  Identifier = "EarthMoonCoRevFrame",
  Parent = transforms.EarthECLIPJ2000.Identifier,
  Transform = {
    Rotation = {
      Type = "SpiceRotation",
      SourceFrame = "EARTH_MOON_COREV",
      DestinationFrame = 'ECLIPJ2000',
      Kernels = { kernels .. "earth_moon_corev.tf" }
    }
  },
  GUI = {
    Name = "Earth Moon Co-revolving Reference Frame",
    Path = "/Solar System/Planets/Earth",
    Hidden = true
  }
}

asset.onInitialize(function()
  openspace.addSceneGraphNode(EarthMoonCoRevFrame)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(EarthMoonCoRevFrame)
end)

asset.export(EarthMoonCoRevFrame)
