local textures = asset.resource({
  Name = "Brown Dwarf Textures",
  Type = "HttpSynchronization",
  Identifier = "digitaluniverse_dwarfs_textures",
  Version = 1
})

local speck = asset.resource({
  Name = "Brown Dwarf Speck Files",
  Type = "HttpSynchronization",
  Identifier = "digitaluniverse_dwarfs_speck",
  Version = 4
})


local Object = {
  Identifier = "Dwarfs",
  Renderable = {
    Type = "RenderablePointCloud",
    Enabled = false,
    File = speck .. "dwarfs.speck",
    -- Labels = {
    --   File = speck .. "dwarfs.label",
    --   Color = { 0.5, 0.1, 0.2 },
    --   Size = 14.6,
    --   MinMaxSize = { 10, 20 },
    --   Unit = "pc"
    -- },
    Opacity = 1.0,
    Texture = {
      File = textures .. "point3.png",
    },
    Unit = "pc",
    Coloring = {
      FixedColor = { 0.4, 0.0, 0.1 },
      ColorMapping = {
        File = speck .. "dwarfs.cmap",
        ParameterOptions = {
          { Key = "typeindex", Range = { 1.0, 4.0 } }
        }
      }
    },
    SizeSettings = {
      ScaleExponent = 16.2,
      MaxSize = 0.7,
      EnableMaxSizeControl = true
    }
  },
  GUI = {
    Name = "Dwarfs",
    Path = "/Milky Way",
    Description = [[A catalog of substellar objects, not large enough to be fully fledged stars, but larger than planets. Some are brown dwarfs, others are not massive enough for that moniker. Includes L, T, and Y dwarfs.]]
  }
}


asset.onInitialize(function()
  openspace.addSceneGraphNode(Object)
end)

asset.onDeinitialize(function()
  openspace.removeSceneGraphNode(Object)
end)

asset.export(Object)



asset.meta = {
  Name = "Brown Dwarfs",
  Version = "3.0",
  Description = "Digital Universe asset for Brown Dwarfs",
  Author = "Brian Abbott (AMNH)",
  URL = "https://www.amnh.org/research/hayden-planetarium/digital-universe",
  License = "AMNH Digital Universe"
}
